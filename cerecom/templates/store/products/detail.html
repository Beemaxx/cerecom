{% extends "../base.html" %}
{% load static %}
{% load humanize %}
{% block content %}

<div class="container my-3 ">

  <div class="col  my-3">
    <div class="row container-fluid">

      <!-- Left Column Top Big Picture -->

      <div class="container col p-3 align-middle text-center">
        <div class="container-fluid col  p-3">

          <img src="{{ product.image.url }}" class="img-fluid" style="width:auto ; height:300px" alt="">
        </div>

        <!-- Left Column Bottom 3 Small Pictures -->

        <div class="my-2 mx-2">
          <div class="row">
            <div class="col  p-3 ">
              <img src="{{ product.image.url }}" class="img-fluid" style="width:auto ; height:100px" alt="">
              1
            </div>
            <div class="col  mx-1 p-3 ">
              <img src="{{ product.image.url }}" class="img-fluid" style="width:auto ; height:100px" alt="">
              2
            </div>
            <div class="col  p-3 ">
              <img src="{{ product.image.url }}" class="img-fluid" style="width:auto ; height:100px" alt="">
              3
            </div>
          </div>
        </div>
      </div>




      <!-- Right Column Information -->


      <div class="col border-left p-3 my-3   ">
        <div class="">
          <!-- Name -->

          <div class="font-weight-light"> <h6>Product name:</h6>
          </div>
          <div class="my-3">
            <p class="font-weight-light h1"> {{product.name}}</p>

          </div>
          <!-- Category -->

          <div class="d-inline-flex my-2">
            <h5>Category: <a href="{{product.category_id.get_absolute_url}}"
                class="text-decoration-none">{{ product.category_id.name}}</a> </h5>
          </div>
          <!-- Price -->

          <div class="my-2">
            <h5>
              <p class="font-weight-light">Price: {{ product.price }} VND</p>
            </h5>
          </div>

          <!-- Description -->
          <div class="border-top border-bottom py-2 align-middle">
            {% if product.desc %}
            <p class="px-2">{{ product.desc }}</p>
            {% else %}
            <small>
              <p class="font-weight-light">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Morbi egestas mauris
                quis elit faucibus, nec finibus leo dapibus. Proin enim neque, aliquet bibendum lorem maximus, hendrerit
                iaculis nulla. Mauris non diam mollis, eleifend risus a, maximus odio. Integer pulvinar mi dolor, vel
                sagittis quam feugiat sed. Donec sed lacus dignissim, condimentum odio eget, interdum enim. Suspendisse
                ultrices risus nec est blandit venenatis. Sed tristique non massa in placerat. Aliquam nunc massa,
                sodales eget mauris id, malesuada dictum arcu. Nullam ut lacus ullamcorper, posuere ipsum sed, tempus
                erat. Aenean tincidunt mi eu egestas ultrices. Vestibulum sit amet viverra velit. Etiam eget elementum
                lacus. Quisque maximus libero vitae libero laoreet, vel lobortis metus egestas. Proin aliquam erat vel
                pretium porta.</p>
            </small>
            {% endif %}
          </div>
          <!-- Quantity -->

          <div class="container my-3 row">
            <div class="d-inline-flex">
              <label for="select" class="">
                <h5>Quantity</h5>
              </label>
            
              <select id="select" class="mx-5">
                <option value="1">1</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
              </select>
            </div>

            <!-- Add button-->
            <div class="row ">
              <button id="add-button" data-index="{{ product.id }}" class="add-button btn btn-secondary my-3 w-50" type="button">
                {% comment %} <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" fill="currentColor"
                  class="bi bi-plus-square" viewBox="0 0 16 16">
                  <path
                    d="M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h12zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2z" />
                  <path
                    d="M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z" />
                </svg> {% endcomment %}
                Add to Cart
              </button>
            </div>

          </div>

        </div>
      </div>
    </div>
  </div>
</div>
<script>
  $(document).on('click', '.add-button', function (e) {
    e.preventDefault();
    var item_quty_single = $('#select').find(":selected").val();
    $.ajax({
      type: 'POST',
      url: '{% url "cart:cart_add" %}',
      data: {
        productid: $(this).data('index'),
        csrfmiddlewaretoken: "{{csrf_token}}",
        productqty: item_quty_single,
        action: 'add',
      },

      success: function (json) {
        console.log(json)
        document.getElementById("cart_quanty").innerHTML = json.qty
      },
      error: function (xhr, errmsg, err) {}
    })
  })
</script>


{% endblock %}